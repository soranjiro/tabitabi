name = "tabitabi-api"
main = "src/index.ts"
compatibility_date = "2024-09-17"

[observability]
enabled = true

[[d1_databases]]
binding = "DB"
database_name = "tabitabi"
database_id = "PLACEHOLDER_DATABASE_ID"
migrations_dir = "./migrations"

[vars]
ALLOWED_ORIGINS = "*"

[env.production]
name = "tabitabi-api"

[env.production.vars]
ALLOWED_ORIGINS = "https://tabitabi.pages.dev"
JWT_SECRET = "PLACEHOLDER_PROD_SECRET"

[env.production.observability]
enabled = true

[[env.production.d1_databases]]
binding = "DB"
database_name = "tabitabi"
database_id = "PLACEHOLDER_DATABASE_ID"
migrations_dir = "./migrations"

[env.preview]

[env.preview.vars]
ALLOWED_ORIGINS = "*"

[env.preview.observability]
enabled = true

[[env.preview.d1_databases]]
binding = "DB"
database_name = "tabitabi"
database_id = "PLACEHOLDER_DATABASE_ID"
migrations_dir = "./migrations"
